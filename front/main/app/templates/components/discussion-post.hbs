{{discussion-dialog
	confirmButtonText=confirmButtonText
	confirmCallback=confirmCallback
	dialogMessage=dialogMessage
	headerText=dialogHeaderText
	isConfirm=isConfirm
	isVisible=shouldShowDialogMessage
}}
<div class="site-body-discussion post-details-view">
	<div class="minimized discussion-hero-unit background-theme-color"></div>
	<div class="discussion-page row">
		<div class="rail large-2 columns">
			{{community-badge}}
			{{#link-to 'discussion.forum' model.forumId discussionSort.sortBy class="side-button back-button active-element-theme-color"}}
				{{svg 'back-arrow' role='img' class='icon arrow-left fill-theme-color'}}
				{{i18n 'main.back-to-discussions-link' ns='discussion'}}
			{{/link-to}}
			<div class="discussion-contributors-title">{{i18n 'main.contributors-title' ns='discussion'}}</div>
			{{#if model.replies}}
				{{discussion-contributors
					contributors=model.contributors
					maxContributorDisplayCount=7
					totalContributorCount=model.postCount
				}}
			{{else}}
				<span class="no-replies-message">{{i18n 'main.no-replies' ns='discussion'}}</span>
			{{/if}}
		</div>
		{{#if model.connectionError}}
			{{discussion-connection-error
				retry=(action this.attrs.retry)
			}}
		{{else if model.notFoundError}}
			{{discussion-not-found-error
				forumId=model.forumId
			}}
		{{else}}
				<div class="discussion post small-12 large-8 columns">
					{{post-detail
						approve=(action this.attrs.approvePost)
						author=model.firstPost.createdBy
						delete=(action this.attrs.deletePost)
						isDetailsView=true
						post=model.firstPost
						postId=model.id
						replyCount=model.postCount
						report=(action this.attrs.reportPost)
						timestamp=model.firstPost.creationDate.epochSecond
						undelete=(action this.attrs.undeletePost)
						upvoteCount=model.upvoteCount
						upvote=(action this.attrs.upvote)
					}}
					{{#if model.replies}}
						<div class="desktop-hidden discussion-contributors-mobile">
							{{discussion-contributors
								contributors=model.contributors
								maxContributorDisplayCount=7
								totalContributorCount=model.postCount
							}}
						</div>
						{{#if canShowMore}}
							<button {{action this.attrs.loadMoreComments}} class="see-more active-element-theme-color">
								{{svg 'comments' viewBox='0 0 30 30' class='icon replies'}}
								{{i18n 'main.pagination-post-show-more' ns='discussion'}}
							</button>
						{{/if}}
					{{/if}}
					<div class="replies-list">
						{{#each model.replies as |item index|}}
							{{post-reply
								approve=(action this.attrs.approveReply)
								author=item.createdBy
								content=item.rawContent
								delete=(action this.attrs.deleteReply)
								isDetailsView= true
								isNew=item.isNew
								isParentDeleted=model.firstPost.isDeleted
								report=(action this.attrs.reportReply)
								post=item
								timestamp=item.creationDate.epochSecond
								undelete=(action this.attrs.undeleteReply)
								upvote=(action this.attrs.upvote)
								upvoteCount=item.upvoteCount
							}}
						{{else}}
							<div class="discussion-no-replies">
								{{svg 'comments' viewBox='0 0 30 30' class='icon no-replies'}}
								{{i18n 'main.no-replies-be-the-first' ns='discussion'}}
							</div>
						{{/each}}
						{{#unless model.firstPost.isDeleted}}
							{{discussion-reply-editor
								create=(action this.attrs.create)
								replies=model.replies
							}}
						{{/unless}}
					</div>
				</div>
		{{/if}}
		<div class="rail large-2 columns">
			{{discussion-app-promotion}}
		</div>
	</div>
</div>
