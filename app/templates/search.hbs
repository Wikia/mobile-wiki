<Ads::SearchTopLeaderboard />
<Spinner
  @active={{@model.loading}}
  @radius={{38}}
  @strokeWidth={{3}}
/>
<div class="search-results">
  <div class="search-results__total wds-font-size-s wds-leading-tight">
    {{{i18n
      "main.total-results"
      ns="search"
      totalItems=@model.totalItems
      query=(wrap-me @model.query tagName="strong" className="wds-font-weight-bold")
    }}}

    <Dropdown as |dropdown|>
      {{#if @model.isInteralScope }}
        <dropdown.toggle class="push-dropdown-down"
            @text={{{i18n "main.search-scope-internal" ns="search" tagName="strong" className="wds-font-weight-bold" }}} />
      {{else}}
        <dropdown.toggle class="push-dropdown-down"
            @text={{{i18n "main.search-scope-crosswiki" ns="search" tagName="strong" className="wds-font-weight-bold" }}} />
      {{/if}}

      <dropdown.content @scrollable={{false}}>
        <List @linked={{true}}>
          <li><LinkTo @route="search" @query={{hash query=@model.query scope="internal"}}>{{{i18n "main.search-scope-internal" ns="search" }}}</LinkTo></li>
          <li><LinkTo @route="search" @query={{hash query=@model.query scope="crosswiki"}}>{{{i18n "main.search-scope-crosswiki" ns="search" }}}</LinkTo></li>
        </List>
      </dropdown.content>
    </Dropdown>
  </div>
  {{#if @model.totalItems}}
    {{#if @model.isInteralScope }}
      <WikiaUiComponents::WikiaCardList @items={{@model.items}} @includePostsForQuery={{@model.query}} @trackingCategory="search-page" @trackingLabel="search-result" @itemClick={{this.onResultClick}} @debugAffiliateUnits={{@model.debugAffiliateUnits}} />
    {{else}}
      <WikiaUiComponents::WikiaCardCrosswikiList @items={{@model.items}} @includePostsForQuery={{@model.query}} @trackingCategory="search-page" @trackingLabel="search-result" @itemClick={{this.onResultClick}} @debugAffiliateUnits={{@model.debugAffiliateUnits}} />
    {{/if}}
  {{else if this.notFoundError}}
    <WikiaUiComponents::ErrorInfo>
      <WikiaSearchErrorNotFound @erroneousQuery={{@model.erroneousQuery}} />
    </WikiaUiComponents::ErrorInfo>
  {{/if}}
</div>
{{#if @model.canLoadMore}}
  <div class="search-results__load-more-wrapper">
    <Button
      @onClick={{fn this.onLoadMore "search-load-more"}}
      @secondary={{true}}
      data-tracking-label="search-load-more"
    >
      {{i18n "main.load-more-results" ns="search"}}
    </Button>
  </div>
{{/if}}
