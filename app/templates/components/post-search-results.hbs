{{#if isEnabled}}
  <aside class="post-search-results">
    <header class="post-search-results__header">
      <div class="post-search-results__header-text wds-midlight-navy">
        <Icon @name="comment" @size="small" />
        {{{i18n "main.search-post-items-header" ns="search"}}}
      </div>
      {{#if seeMoreButtonEnabled}}
        <Button
          @href={{seeMoreUrl}}
          @text={{true}}
          class="post-search-results__see-more"
          onclick={{action "trackMoreClick"}}
        >
          <span>{{{i18n "main.search-post-items-see-more" ns="search"}}}</span>
          <Icon @name="arrow" @size="tiny" />
        </Button>
      {{/if}}
    </header>
    {{#if isLoading}}
      <Spinner
        @active={{true}}
        @block={{true}}
        @overlay={{false}}
        @radius={{24}}
        @strokeWidth={{2}}
        class="post-search-results__loading"
      />
    {{else}}
      {{#each posts as |post index|}}
        {{post-search-results-item post=post postIndex=index}}
        {{#if smallAffiliateUnit}}
          {{!-- If there is only one post we want to show it after the first one --}}
          {{#if (equal posts.length 1)}}
            {{#if (equal index 0)}}
              {{post-search-results-affiliate-item affiliateUnit=smallAffiliateUnit postIndex=index}}
            {{/if}}
          {{/if}}
          {{!-- All other cases show it after the first index --}}
          {{#if (equal index 1)}}
            {{post-search-results-affiliate-item affiliateUnit=smallAffiliateUnit postIndex=index}}
          {{/if}}
        {{/if}}
      {{else}}
        <div class="post-search-results__no-posts">
          {{{i18n "main.search-post-item-no-posts" ns="search"}}}
        </div>
      {{/each}}
    {{/if}}
  </aside>
{{/if}}
{{#if bigAffiliateUnit}}
  {{affiliate-unit
    heading=bigAffiliateUnit.heading
    image=bigAffiliateUnit.image
    link=bigAffiliateUnit.link
    subheading=bigAffiliateUnit.subheading
  }}
{{/if}}
