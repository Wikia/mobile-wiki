<!DOCTYPE html>
<html lang="{{wikiVariables.language.content}}" dir="{{wikiVariables.language.contentDir}}" {{#if preview}}class='article-preview'{{/if}}>
<head>
	{{content-for 'head'}}

	<script>
		// TODO maybe we don't need it
		// initialize objects needed for Oasis
		Wikia = {};
		// initialize objects needed for AdEngine
		mw = { loader: { state: function() {} } };
		wgNow = new Date();
	</script>

	<script src="/mobile-wiki/assets/vendor/jquery/jquery.min.js" crossorigin="anonymous"></script>
	{{content-for 'baseline'}}
	<!--{{> tracking-quantserve}}-->
	<!--{{> tracking-comscore}}-->
	<!--{{> optimizely}}-->
	<!--{{> tracking-ua-init}}-->

	{{content-for 'head-footer'}}
</head>
<body id="ember-container" class="mobile-wiki {{bodyClassName}}">
{{content-for 'body'}}

<!--{{> first-render-time}}-->
<!--{{> qualaroo}}-->

<script src="/mobile-wiki/assets/vendor.js" defer></script>
<script src="/mobile-wiki/assets/mobile-wiki.js" defer></script>
<script>
	// TODO move it somewhere
	htmlToElement = function (html) {
		var template = document.createElement('template');

		template.insertAdjacentHTML('beforeend', html);

		return template.firstChild;
	};

	loadDOMResource = function (src) {
		var ajax = new XMLHttpRequest();

		ajax.onload = function () {
			var element = htmlToElement(ajax.responseText);

			element.style.cssText = 'height: 0; width: 0; position: absolute; overflow: hidden;';

			document.body.insertBefore(element, document.body.firstChild);
		};

		ajax.onerror = function (error) {
			throw new URIError('The resource ' + error.target.src + ' is not accessible.');
		};

		ajax.open('GET', src, true);
		ajax.send();
	};

	loadDOMResource('/mobile-wiki/assets/main.svg');
	loadDOMResource('/mobile-wiki/assets/common.svg');
	loadDOMResource('/mobile-wiki/assets/design-system.svg');
</script>

<script src="//{{server.mediawikiDomain}}/__load/-/only=scripts/wikia.ext.instantGlobals,instantGlobalsOverride,abtesting,abtest"></script>
<!--{{> tracking-ua}}-->
<!--{{> tracking-internal}}-->
<!--{{> tracking-ivw3}}-->

{{content-for 'body-footer'}}

<!--{{> tracking-pixels}}-->
<!--{{> tracking-nielsen}}-->
<!--{{> tracking-netzathleten}}-->
</body>
</html>
