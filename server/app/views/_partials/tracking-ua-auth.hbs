{{#unless queryParams.noexternals}}
	<script>
		// when optimizely loads, initialize trackers and track initial pageview
		$script.ready(['optimizely'], function () {
			var ua = M.tracker.UniversalAnalytics;

			function getQueryParam(name) {
				var nameSanitized = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]'),
						regex = new RegExp(`[\\?&]${nameSanitized}=([^&#]*)`),
						results = regex.exec(location.search);

				return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
			}

			if (ua.initialize({
						3: null,
						4: 'mercury',
						5: 'anon',
						8: 'authPage',
						10: getQueryParam('redirect'),
						14: false,
						15: 'No',
						19: null,
						25: null
					})) {
				ua.trackPageView();
			}
		});
	</script>
{{/unless}}
